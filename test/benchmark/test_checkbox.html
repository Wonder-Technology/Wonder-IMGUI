<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>benchmark</title>
</head>

<body>

    <canvas id="aaa" width=900 height=500></canvas>

    <script src="./SettingTool.js"></script>
    <script src="../../dist/wdimgui.js"></script>



    <script>
        window.onload = function () {

            var canvas = document.querySelector("#aaa");

            var gl = canvas.getContext("webgl");

            var image1 = new Image();

            image1.src = "./1.jpg";
            image1.onload = () => {
                var image2 = new Image();

                image2.src = "./1.png";
                image2.onload = () => {


                    var record = wdimgui.createRecord();




                    var record =
                        wdimgui.addFont(
                            "../res/font/myFont.fnt",
                            "../res/font/myFont.png",
                            record
                        );

                    var checkboxX = 200;
                    var checkboxY = 20;
                    var checkboxWidth = 100;
                    var checkboxHeight = 100;


                    var recordForLoop = null;

                    function step(timestamp) {
                        var record = recordForLoop;

                        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);


                        recordForLoop = wdimgui.render(gl,
                            {
                                pointUp: true,
                                pointDown: true,
                                pointPosition: [checkboxX + 50, checkboxY + checkboxHeight / 2],
                                pointMovementDelta: [0, 0],
                            },
                            record);


                        window.requestAnimationFrame(step);
                    }

                    wdimgui.load(
                        [
                            ["./1.jpg", "a1"],
                            ["./1.png", "a2"],
                        ],
                        record)
                        .then((record) => {
                            var record = wdimgui.setIMGUIFunc(null, (_, apiJsObj, record) => {
                                var label = apiJsObj.label;
                                var image = apiJsObj.image;
                                var checkbox = apiJsObj.checkbox;


                                var [record, isSelect1] = checkbox(
                                    [checkboxX, checkboxY, checkboxWidth, checkboxHeight], "a",
                                    record
                                );



                                var record = image(
                                    [50, 150, 50, 100], [0, 0, 1, 1], "a1", record
                                );



                                var [record, isSelect2] = checkbox(
                                    [checkboxX * 2, checkboxY, checkboxWidth, checkboxHeight], "a",
                                    record
                                );


                                var record = label(
                                    [20, 20, 300, 100], "ab", 1, record
                                );


                                // console.log(isSelect1, isSelect2);

                                return record
                            }, record);

                            var record = setSetting(record);


                            var record = wdimgui.init(gl, [canvas.width, canvas.height], record);


                            gl.clearColor(0, 1, 1, 1);

                            recordForLoop = record;


                            window.requestAnimationFrame(step);
                        })






                };
            }


        };
    </script>
</body>

</html>